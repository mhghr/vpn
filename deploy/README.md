## نصب خودکار روی سرور (حالت Webhook)

در حالت عادی پروژه روی لوکال با `polling` اجرا می‌شود.

اسکریپت `deploy/install_webhook.sh` روی سرور:
- پکیج‌های لازم را نصب می‌کند (Python/PostgreSQL/Nginx/Certbot)
- وابستگی‌های پایتون را به‌صورت نسخه‌پین‌شده و با `pip check` نصب/اعتبارسنجی می‌کند تا ریسک ناسازگاری نسخه‌ها کم شود
- دیتابیس و یوزر PostgreSQL را می‌سازد
- فایل `.env` را فقط با مقادیر ضروری اجرای ربات/وبهوک/دیتابیس می‌سازد (توکن ربات، ادمین، کانال، تنظیمات DB)
- فایل اجرای بات را از حالت polling به webhook تغییر می‌دهد (`main.py`)
- سرویس systemd می‌سازد و Nginx+SSL را تنظیم می‌کند

> نکته: اطلاعات میکروتیک/سرورها عمداً داخل اسکریپت پرسیده نمی‌شود و باید بعد از بالا آمدن ربات از پنل ادمین داخل خود بات ثبت شوند.

> نکته: اطلاعاتی مثل کارت بانکی در این اسکریپت پرسیده نمی‌شود.

### اجرا

```bash
sudo bash deploy/install_webhook.sh
```

پس از اجرا، ربات و دیتابیس بدون نیاز به تغییر دستی اضافه بالا می‌آیند.
همچنین فایل `bot/requirements.lock.txt` برای عیب‌یابی و تکرارپذیری نسخه‌ها ساخته می‌شود.
